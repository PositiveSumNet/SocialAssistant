<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="utf-8" >
    <title>Whosum Social Assistant</title>
    <link href="/images/favicon.ico" rel="icon" type="image/x-icon" >
    <link href='css/bootstrap/bootstrap.min.css' rel='stylesheet' >
    <link href='css/bootstrap/flags.css' rel='stylesheet' >
    <link href='css/app.css' rel='stylesheet' >
    <link href='lib/bootstrap-icons/bootstrap-icons.css' rel='stylesheet' >
  </head>
  <body>
    <div class='main container-fluid'>
      <h1 class="row bg-header inkfree"><a href="https://whosum.com" target="_blank">+Î£ Whosum</a></h1>
      <div class="row bg-subheader">
        <div class="col">
          <span class="h5 inkfree">Locally Cached Social Database</span>
        </div>
        <div class="col-sm-auto text-right">
          <span id='transferringMsg' style="display:none;">
            Copying recent recordings to local database...  | 
          </span>
          <span>
            <a href="#" id="startExportBtn" role="button" data-toggle='tooltip' title='export backup files'>Export</a>
            <a href="#" id="pauseExportBtn" role="button" data-toggle='tooltip' title='pause file backup' style="display:none;">Pause Export</a>
            <span class="syncsep">&nbsp;|&nbsp;</span>
            <a href="#" id="startImportBtn" role="button" data-toggle='tooltip' title='import to restore'>Import</a>
            <a href="#" id="stopImportBtn" role="button" data-toggle='tooltip' title='stop import' style="display:none;">Cancel Import</a>
            <span class="syncsep">&nbsp;|&nbsp;</span>
            <a href="#" id="configureSyncBtn" role="button" data-toggle='tooltip' title='configure automated sync'><span style="color: #ffd700;">(new!)</span> Automated Sync</a>
            <a href="#" id="cancelConfigureSyncBtn" role="button" data-toggle='tooltip' title='cancel sync config' style="display:none;">Cancel Sync Config</a>
          </span>
        </div>
      </div>
      <div id="configureSyncUi" class="row p-2" style="display:none;">
        <h3><i class="bi-github pe-2"></i>Configure Sync</h3>
        <p>
          Sync to a location you own and control! 
          We've done the research and, like 100 million software developers, 
          we put our trust in <a href="https://github.com" target="_blank">GitHub.com</a>. 
          Don't worry, you won't need any technical skills. 
        </p>
        <p><a href="https://github.com/signup" class="btn btn-secondary" target="_blank" role="button">Create a GitHub account</a></p>
        <p>Then choose one</p>
        <p><a href="#" id="btnBasicSyncSetup" class="btn btn-primary" role="button"><i class="bi-github pe-2"></i>Basic Setup</a></p>
        <p><a href="#" id="btnAdvancedSyncSetup" class="btn btn-secondary" role="button">Advanced Setup</a></p>
        <div id="advancedSetupUi" style="display:none;">
          <p>
            Both setup methods result in granting the Whosum app (but not our servers) access to a newly created sync repository. 
            This advanced flow avoids the interim step of granting account-level access via OAuth (leaving a couple manual steps for you instead).
          </p>
          <ol>
            <li>
              <a href="https://github.com/new" target="_blank">Click to create a <b>PRIVATE</b> repository</a> with the name <code>mywhosum</code>
            </li>
            <li>
              <a href="https://github.com/settings/personal-access-tokens/new" target="_blank">Click to create a 'fine-grained' personal access token</a> 
                and name it (e.g. a name like <code>mywhosumtoken1</code>)
            </li>
            <li>Extend the expiration as desired</li>
            <li>Keep yourself as the resource owner</li>
            <li>Choose 'Only select repositories' and choose the newly created <code>mywhosum</code> repository</li>
            <li>For 'Permissions -> Repository Permissions -> Content' select 'Read and Write'</li>
            <li>Click Generate Token</li>
            <li>Copy the token value and paste it below</li>
          </ol>
          <p>
            <div class='input-group' style="margin-bottom:20px;">
              <label for='txtGithubAccessToken' class='text-muted input-group-text'>token</label>
              <input id='txtGithubAccessToken' type='text' placeholder='github_pat_123456789...' class='form-control' >
            </div>
          </p>
        </div>
        <div id="syncMessage">

        </div>
        <p><a href="#" id="btnCloseSyncSetup" class="btn btn-secondary" role="button">Close</a></p>
      </div>
      <div id="uploadui" class="row pb-2" style="display:none;">
        <div id="drop-area">
          <form class="my-form">
            <p>Upload multiple files (click or drag & drop)</p>
            <input type="file" id="fileElem" multiple accept="application/JSON">
            <label class="upload-button" for="fileElem">Choose files</label>
          </form>
        </div>        
        <div class="pt-3 ps-4">
          <span>Uploaded: </span><span id="uploadedCnt">0</span> | 
          <span>Processed: </span><span id="syncImportProcessedCnt">0</span>
        </div>
        <div class="pt-2 ps-4">
          <a href="#" id="uploadDone" role="button" class="btn btn-primary">Done</a>
        </div>
      </div>
      <div id="dbui" class="row pb-2 container-fluid">
        <div id="listFilterSet" class='row'>
          <div class='pt-2 col-2'>
            <div class='input-group' style="margin-bottom:20px;">
              <label for='txtOwnerHandle' class='text-muted input-group-text'>@</label>
              <input id='txtOwnerHandle' type='text' placeholder='account' class='form-control' >
            </div>
          </div>
          <div id='followDirection' class='col-sm-auto'>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="optFollowDirection" id="optFollowing">
              <label class="form-check-label" id="optFollowingLabel" for="optFollowing">following&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="optFollowDirection" id="optFollowers">
              <label class="form-check-label" id="optFollowersLabel" for="optFollowers">followers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            </div>
          </div>
          <div class='pt-2 col-2'>
            <input id='txtConnSearch' type='text' class='form-control' placeholder='search...' >
          </div>
          <div id="paging" class='pt-2 col-2' style="white-space:nowrap!important;">
            <label for='txtPageNum' class='text-muted'>pg</label>
            <input id='txtPageNum' type='text' style='border-right:none;' value='1' >
            <a data-toggle='tooltip' title='prior page' href='#' id='priorPage' role='button'><i class="bi-chevron-double-left"></i></a>
            <a data-toggle='tooltip' title='next page' href='#' id='nextPage' role='button'><i class="bi-chevron-double-right"></i></a>
            <a data-toggle='tooltip' title='set page size' href='#' id='pageGear' role='button'><i class="bi-gear"></i></a>
          </div>
          <div id='queryOptions' class='col-4' style="margin-left:25px;display:block;float:right;">
            <table>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="chkMutual" id="chkMutual">
                    <label class="form-check-label" for="chkMutual">Mutual follow</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="optWith" id="optWithMdon">
                    <label class="form-check-label" for="optWithMdon">
                      <span>Mastodon</span>
                      <a data-toggle='tooltip' title='For the best experience, enter the server where you have an account, e.g. toad.social' href='#' id='mdonGear'><i class="bi-gear"></i></a>
                    </label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="optWith" id="optWithEmail">
                    <label class="form-check-label" for="optWithEmail">w/ Email</label>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="chkFavorited" id="chkFavorited">
                    <label class="form-check-label" for="chkFavorited">Favorite</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="optWith" id="optWithUrl">
                    <label class="form-check-label" for="optWithUrl">w/ Url</label>
                  </div>
                </td>
                <td>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="optWith" id="optClear">
                    <label class="form-check-label" for="optClear">w/ Any</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div id="connListProgress" class="progress" style="height:3px;">
          <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
        </div>
        <div id='connList' class='row'></div>
        <div id='listOwnerPivotPicker' class='row pt-2'></div>
        <div class='listMain row' id='connListMain'>
          <div id='paginated-list' aria-live='polite'>
          </div>
        </div>
      </div>
    </div>
    <div class="fixed-bottom">
      <span>
        <span>App Version: <span id='manifestVersion'></span></span>, 
        <span>SQLite DB Version: <span id='sqliteVersionLib'></span>, 
        <span>OPFS: <span id='sqliteOpfsOk'></span>, 
        <span>Script #: <span id='dbScriptNumber'></span> |
        <a href='https://whosum.com/privacy' target='_blank'>Privacy</a> |
        <a href='https://whosum.com/terms' target='_blank'>Terms</a> |
        <a href='https://github.com/positivesumnet/socialassistant' target='_blank'>Code</a>
      </span>
    </div>
    <script src='lib/shared/purify.min.js'></script>
    <script src='lib/shared/constants.js'></script>
    <script src='lib/shared/pagetypes.js'></script>
    <script src='lib/shared/settingslib.js'></script>
    <script src='lib/shared/es6lib.js'></script>
    <script src='lib/shared/strlib.js'></script>
    <script src='lib/shared/emojilib.js'></script>
    <script src='lib/shared/datatypes.js'></script>
    <script src='lib/shared/appgraphs.js'></script>
    <script src='lib/shared/appschema.js'></script>
    <script src='lib/shared/githublib.js'></script>
    <script src='lib/dbui/renderlib.js'></script>
    <script src='index.js'></script>
  </body>
</html>
